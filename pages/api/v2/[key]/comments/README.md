# Документация API “Лента комментариев”

**Base url:** https://webdev-hw-api.vercel.app/api/v2/:personal-key

В адресах этого api испольуется параметр `:personal-key`, чтобы у каждого пользователя был свой собственный список комментариев.

Для того чтобы использовать API, замените `:personal-key` на свое имя и фамилию, например мой адрес апи для получения комментов выглядит так:

```
https://webdev-hw-api.vercel.app/api/v2/gleb-fokin/comments
```

## Api endpoints

### Получить список комментариев

адрес: /comments

метод: GET

Возвращает код 200 и список комментариев в формате JSON:

```json
{
  "comments": [
    {
      "id": 1,
      "date": "2023-03-10T10:11:23.237Z",
      "likes": 0,
      "isLiked": false,
      "text": "Это мой первый лайк",
      "author": { "name": "Глеб Фокин" }
    }
  ]
}
```

### Добавить новый комментарий

Апи работает только с авторизацией, подробнее читай в разделе "Авторизация"

адрес: /comments

метод: POST

В теле запроса принимает объект комментария в формате JSON:

```json
{ "text": "Текст коммента" }
```

Возвращает код 201 и объект результата:

```json
{ "result": "ok" }
```

Возвращает код 400 и объект с ошибкой в формате JSON в следующих случаях

- Текст короче 3 символов
- В теле запроса не передан text
- В теле запроса передан не json

Пример ответа с ошибкой:

```json
{ "error": "text должен содержать хотя бы 3 символа" }
```

## Авторизация

Некоторые эндпоинты апи работают только с авторизацией.

В таких эндпоинтах используется авторизация по Bearer токену.
Передайте в заголовке Authorization пользовательский токен "Bearer ksdfsksdfjfsdjk".

Токен можно получить в [апи авторизации](../../../user/README.md)

Запросы без авторизации в такие эндпоинты возвращают 401 статус ответа
